<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Happy Birthday Prajwal ðŸŽ‰</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  background:black;
  color:white;
  font-family:Segoe UI,sans-serif;
  overflow:hidden;
  text-align:center;
}
.container{
  position:fixed;
  top:20px;
  width:100%;
  z-index:10;
}
.neon{
  font-size:3.5rem;
  color:#0ff;
  text-shadow:0 0 25px #0ff,0 0 60px #0ff;
}
#playBtn{
  position:fixed;
  bottom:20px;
  left:50%;
  transform:translateX(-50%);
  padding:14px 26px;
  border-radius:30px;
  border:none;
  background:#00ffff;
  font-weight:bold;
  box-shadow:0 0 20px #0ff;
  cursor:pointer;
  z-index:20;
}
</style>
</head>

<body>

<div class="container">
  <h1>ðŸŽ‰ Happy Birthday ðŸŽ‰</h1>
  <div class="neon">PRAJWAL</div>
</div>

<audio id="music" loop preload="auto">
  <source src="./birthday.mp3" type="audio/mpeg">
</audio>
<button id="playBtn">ðŸŽµ Tap to Start</button>

<script type="module">
import * as THREE from "https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.module.js";
import { FontLoader } from "https://cdn.jsdelivr.net/npm/three@0.152.2/examples/jsm/loaders/FontLoader.js";
import { TextGeometry } from "https://cdn.jsdelivr.net/npm/three@0.152.2/examples/jsm/geometries/TextGeometry.js";

/* ================= MUSIC ================= */
const music = document.getElementById("music");
document.getElementById("playBtn").onclick = ()=>{
  music.currentTime = 10;
  music.volume = 0;
  music.play();
  let v=0;
  const fade=setInterval(()=>{
    v+=0.04;
    music.volume=Math.min(v,0.8);
    if(v>=0.8) clearInterval(fade);
  },120);
  playBtn.style.display="none";
};

/* ================= SCENE ================= */
const scene = new THREE.Scene();
scene.fog = new THREE.Fog(0x000000, 30, 120);

const camera = new THREE.PerspectiveCamera(75, innerWidth/innerHeight, 0.1, 1000);
camera.position.set(0,5,45);

const renderer = new THREE.WebGLRenderer({alpha:true,antialias:true});
renderer.setSize(innerWidth, innerHeight);
renderer.setPixelRatio(devicePixelRatio);
document.body.appendChild(renderer.domElement);

/* ================= LIGHTS ================= */
scene.add(new THREE.AmbientLight(0xffffff,1.2));
const point = new THREE.PointLight(0x00ffff,2,200);
point.position.set(20,40,40);
scene.add(point);

/* ================= STARS (DEPTH MOVE) ================= */
const starGeo = new THREE.BufferGeometry();
const starPos = [];
for(let i=0;i<1500;i++){
  starPos.push(
    (Math.random()-0.5)*200,
    (Math.random()-0.5)*120,
    -Math.random()*200
  );
}
starGeo.setAttribute("position", new THREE.Float32BufferAttribute(starPos,3));
const stars = new THREE.Points(
  starGeo,
  new THREE.PointsMaterial({color:0xffffff,size:0.7})
);
scene.add(stars);

/* ================= CAKE (BOUNCE) ================= */
const cake = new THREE.Group();
[0xffc0cb,0xff69b4,0xff1493].forEach((c,i)=>{
  const layer = new THREE.Mesh(
    new THREE.CylinderGeometry(8-2*i,8-2*i,3,32),
    new THREE.MeshStandardMaterial({color:c})
  );
  layer.position.y = i*3;
  cake.add(layer);
});
cake.position.y = -10;
scene.add(cake);

/* ================= BALLOONS (SWAY) ================= */
const balloons=[];
const colors=[0xff0000,0xffff00,0x00ff00,0x00ffff,0xff00ff];
for(let i=0;i<18;i++){
  const b=new THREE.Mesh(
    new THREE.SphereGeometry(1.5,16,16),
    new THREE.MeshStandardMaterial({color:colors[i%colors.length]})
  );
  b.position.set(
    (Math.random()-0.5)*50,
    -40-Math.random()*40,
    (Math.random()-0.5)*30
  );
  b.speed = 0.03 + Math.random()*0.03;
  b.phase = Math.random()*Math.PI*2;
  balloons.push(b);
  scene.add(b);
}

/* ================= 3D NAME (WAVE FLOAT) ================= */
let textMesh;
new FontLoader().load(
  "https://threejs.org/examples/fonts/helvetiker_regular.typeface.json",
  font=>{
    const geo = new TextGeometry("PRAJWAL",{
      font,size:4,height:1,curveSegments:12
    });
    geo.center();
    textMesh = new THREE.Mesh(
      geo,
      new THREE.MeshStandardMaterial({color:0xffaa00,emissive:0x331100})
    );
    textMesh.position.y = 14;
    scene.add(textMesh);
  }
);

/* ================= ANIMATION LOOP ================= */
let t=0;
function animate(){
  requestAnimationFrame(animate);
  t+=0.01;

  cake.rotation.y += 0.01;
  cake.position.y = -10 + Math.sin(t)*0.6;

  balloons.forEach(b=>{
    b.position.y += b.speed;
    b.position.x += Math.sin(t+b.phase)*0.02;
    if(b.position.y > 35) b.position.y = -45;
  });

  if(textMesh){
    textMesh.rotation.y = Math.sin(t)*0.3;
    textMesh.position.y = 14 + Math.sin(t*2)*0.8;
  }

  stars.rotation.y += 0.0005;
  camera.position.x = Math.sin(t*0.3)*1.5;

  renderer.render(scene,camera);
}
animate();

/* ================= RESIZE ================= */
addEventListener("resize",()=>{
  camera.aspect = innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth, innerHeight);
});
</script>

</body>
</html>
